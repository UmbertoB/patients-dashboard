<div class="panel" style="padding: 0;">
  <div class="panel-head">
    <h4 class="panel-title">
      Sess천es

    </h4>
    <div class="sessions-action">
        <button (click)="changeModalState('open')" class="btn btn-primary btn-sm">Registrar</button>
        <button (click)="downloadPatientEvolution()" class="btn btn-success btn-sm ml-2">
          <i class="fa fa-download"></i>
           Download
        </button>
      </div>
  </div>
  <div class="panel-body" style="padding: 25px;">

    <div class="expansive-panel pointer" (click)="session.opened = !session.opened" *ngFor="let session of patientSessions"
      [ngClass]="
      {
        'full-radius': patientSessions.length === 1,
        'no-top-radius': patientSessions[patientSessions.length - 1] === session && patientSessions.length > 1,
        'no-bottom-radius': patientSessions[0] === session && patientSessions.length > 1,
        'no-radius': patientSessions[patientSessions.length - 1] !== session && patientSessions[0] !== session && patientSessions.length > 1,
        'selected-panel': session.opened,
        'expansive-panel-good': session.humour_id === 4,
        'expansive-panel-medium': session.humour_id === 5,
        'expansive-panel-bad': session.humour_id === 1 || session.humour_id === 2 || session.humour_id === 3
      }">
      <div class="row">
        <div class="col-sm-2">
          <h4 id="humour">{{session.Humour.title}}</h4>
        </div>



        <div class="col-sm-5">
          <h4 id="first-session" style="text-align: center">{{(session.attendance_at | date:'EEEE')}}</h4>
        </div>

        <div class="col-sm-5">
          <!--offset-md-4-->
          <h4 id="attendance_at">{{ (session.attendance_at | date:'dd/MM/yyyy') + ' ' + (session.attendance_at |
            date:'HH:mm') }}</h4>
        </div>

      </div>

      <div [@collapse] *ngIf="session.opened" class="expanded">

        <p>
          {{session.description}}
        </p>

      </div>

    </div>


    <div *ngIf="patientSessions.length === 0" style="text-align: center">
      <span>N찾o houve sess천es com este paciente</span>
    </div>


    <div *ngIf="totalSessions > patientSessions.length" class="mt-4" style="text-align: center">
      <button class="btn btn-primary btn-md" (click)="showAllSessions()">Carregar todas as Sess천es</button>
    </div>


  </div>

</div>


<app-create-session *ngIf="modalState === 'open'" (closeModal)="changeModalState($event)"></app-create-session>